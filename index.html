<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GeoRanks — Global Ranking Challenge 🌍</title>

  <!-- Fonts and Styles -->
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/game-modes.css" />
  <link rel="stylesheet" href="css/home.css" />
</head>

<body>
  <div class="auth-modal" id="authModal">
    <div class="modal-window">
      <button class="close-auth-modal" id="closeAuthModal">×</button>
      <h2 id="authModalTitle">Sign In</h2>

      <input type="email" id="authEmail" placeholder="Email address" />
      <input type="password" id="authPassword" placeholder="Password" />

      <button class="btn-auth" id="authSubmit">Continue</button>

      <div class="oauth-section">
        <button class="oauth-btn google" id="oauthGoogle">
          <img src="assets/google.png" alt="Google" width="20" /> Sign in with Google
        </button>
      </div>

      <div class="toggle-view" id="toggleAuthView">
        Don’t have an account? <span id="toggleAuthLink">Sign Up</span>
      </div>
    </div>
  </div>

  <!-- 🔹 Glass Header for Home Page -->
  <header class="home-glass-header">
    <div class="sign-in-text">Sign In</div>
    <div class="hamburger-menu">
      <div class="menu-icon" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </header>

  <div class="home-wrapper">
    <!-- Header -->
    <header class="home-header fade-in visible">
      <div class="logo-wrapper">
        <img
          src="assets/logo.png"
          srcset="
            assets/logo@2x.png 2x,
            assets/logo@3x.png 3x
          "
          alt="GeoRanks Logo"
          class="logo"
        />
      </div>
      <p class="tagline">Test Your World Ranking Knowledge! 🌍</p>
    </header>

<!-- Overlay & panel for homepage hamburger menu -->
<div class="menu-overlay" id="menuOverlay">
  <div class="menu-panel">
    <h2>Menu</h2>
    <button class="menu-btn" onclick="window.location.href='index.html'">🏠 Home</button>
    <button class="menu-btn" onclick="window.location.href='#categories'">🎮 Change Category</button>
    <button class="menu-btn">🏆 Leaderboard</button>
    <button class="menu-btn">💡 How to Play</button>
    <button class="menu-btn menu-close" id="closeMenu">Close</button>
  </div>
</div>

    <!-- Daily Challenge -->
<section class="daily-challenge-card fade-in">
  <div class="daily-info">
    <h2>📅 DAILY CHALLENGE</h2>
    <h3>Rank by Landmass 👥</h3>
    <a href="game.html?mode=population" class="btn-primary glow">Play Now</a>
  </div>
</section>

    <!-- Categories -->
    <section class="categories-section fade-in">
      <h2>Other Categories 👇</h2>
      <div class="categories-grid">

        <a href="game.html?mode=population" class="category-card fade-in"
           style="background-image:url('images/categories/population.jpg');">
          <div class="category-info">
            <span class="emoji">👥</span>
            <h3>Population</h3>
          </div>
        </a>

        <a href="game.html?mode=gdp" class="category-card fade-in"
           style="background-image:url('images/categories/gdp.jpg');">
          <div class="category-info">
            <span class="emoji">💵</span>
            <h3>GDP</h3>
          </div>
        </a>

        <a href="game.html?mode=happiness" class="category-card fade-in"
           style="background-image:url('images/categories/happiness.jpg');">
          <div class="category-info">
            <span class="emoji">☺️</span>
            <h3>Happiness</h3>
          </div>
        </a>

        <a href="game.html?mode=forest" class="category-card fade-in"
           style="background-image:url('images/categories/forest.jpg');">
          <div class="category-info">
            <span class="emoji">🌲</span>
            <h3>Forest Cover</h3>
          </div>
        </a>

        <a href="game.html?mode=coastline" class="category-card fade-in"
           style="background-image:url('images/categories/coastline.jpg');">
          <div class="category-info">
            <span class="emoji">🌊</span>
            <h3>Longest Coastline</h3>
          </div>
        </a>

        <a href="game.html?mode=cuisine" class="category-card fade-in"
           style="background-image:url('images/categories/cuisine.jpg');">
          <div class="category-info">
            <span class="emoji">🍽️</span>
            <h3>Cuisine</h3>
          </div>
        </a>

        <a href="game.html?mode=olympic" class="category-card fade-in"
           style="background-image:url('images/categories/olympic.jpg');">
          <div class="category-info">
            <span class="emoji">🥇</span>
            <h3>Olympic Medals</h3>
          </div>
        </a>

        <a href="game.html?mode=worldcup" class="category-card fade-in"
           style="background-image:url('images/categories/worldcup.jpg');">
          <div class="category-info">
            <span class="emoji">⚽️</span>
            <h3>World Cup Trophies</h3>
          </div>
        </a>

        <a href="game.html?mode=landmass" class="category-card fade-in"
           style="background-image:url('images/categories/landmass.jpg');">
          <div class="category-info">
            <span class="emoji">🌍</span>
            <h3>Land Mass</h3>
          </div>
        </a>

        <a href="game.html?mode=crimerate" class="category-card fade-in"
           style="background-image:url('images/categories/crimerate.jpg');">
          <div class="category-info">
            <span class="emoji">🚨</span>
            <h3>Crime Rate</h3>
          </div>
        </a>

        <a href="game.html?mode=altitude" class="category-card fade-in"
           style="background-image:url('images/categories/altitude.jpg');">
          <div class="category-info">
            <span class="emoji">🏔️</span>
            <h3>Highest Altitude</h3>
          </div>
        </a>

        <a href="game.html?mode=passport" class="category-card fade-in"
           style="background-image:url('images/categories/passport.jpg');">
          <div class="category-info">
            <span class="emoji">🛂</span>
            <h3>Passport Strength</h3>
          </div>
        </a>
        
            <a href="game.html?mode=passport" class="category-card fade-in"
           style="background-image:url('images/categories/beer.jpg');">
          <div class="category-info">
            <span class="emoji">🍺</span>
            <h3>Beer Consumption</h3>
          </div>
        </a>
    
            <a href="game.html?mode=passport" class="category-card fade-in"
           style="background-image:url('images/categories/nobelprize.jpg');">
          <div class="category-info">
            <span class="emoji">🕊️</span>
            <h3>Noble Prize Winners</h3>
          </div>
        </a>

              <a href="game.html?mode=passport" class="category-card fade-in"
           style="background-image:url('images/categories/hightemp.jpg');">
          <div class="category-info">
            <span class="emoji">☀️</span>
            <h3>Highest Temperature</h3>
          </div>
        </a>

              <a href="game.html?mode=passport" class="category-card fade-in"
           style="background-image:url('images/categories/rainfall.jpg');">
          <div class="category-info">
            <span class="emoji">🌧️</span>
            <h3>Rainfall</h3>
          </div>
        </a>

      </div>
    </section>

    <!-- Footer -->
    <footer class="home-footer fade-in">
      <p>© 2025 GeoRanks</p>
    </footer>

  </div>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const SUPABASE_URL = 'https://ajwxgdaninuzcpfwawug.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFqd3hnZGFuaW51emNwZndhd3VnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDI5ODgsImV4cCI6MjA3NzA3ODk4OH0._LvYsqhSZIsWLIvAYtEceg1fXbEuaM0DElY5poVqZxI';

  const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const signInText = document.querySelector('.sign-in-text');
  const authModal = document.getElementById('authModal');
  const authTitle = document.getElementById('authModalTitle');
  const emailInput = document.getElementById('authEmail');
  const passwordInput = document.getElementById('authPassword');
  const submitBtn = document.getElementById('authSubmit');
  const toggleAuthView = document.getElementById('toggleAuthView');
  const toggleAuthLink = document.getElementById('toggleAuthLink');
  const oauthGoogleBtn = document.getElementById('oauthGoogle');
  const closeAuthModal = document.getElementById('closeAuthModal');

  let isSignIn = true;

  signInText.addEventListener('click', () => {
    authModal.style.display = 'flex';
    isSignIn = true;
    authTitle.textContent = 'Sign In';
    submitBtn.textContent = 'Continue';
    toggleAuthView.innerHTML = 'Don’t have an account? <span id="toggleAuthLink">Sign Up</span>';
    rebindToggleAuthLink();
  });

  function rebindToggleAuthLink() {
    const newToggle = document.getElementById('toggleAuthLink');
    newToggle.addEventListener('click', () => {
      isSignIn = !isSignIn;
      if (isSignIn) {
        authTitle.textContent = 'Sign In';
        submitBtn.textContent = 'Continue';
        passwordInput.placeholder = 'Password';
        toggleAuthView.innerHTML = 'Don’t have an account? <span id="toggleAuthLink">Sign Up</span>';
      } else {
        authTitle.textContent = 'Sign Up';
        submitBtn.textContent = 'Register';
        passwordInput.placeholder = 'Create a password';
        toggleAuthView.innerHTML = 'Already have an account? <span id="toggleAuthLink">Sign In</span>';
      }
      rebindToggleAuthLink();
    });
  }

  submitBtn.addEventListener('click', async () => {
    const email = emailInput.value.trim();
    const password = passwordInput.value.trim();
    if (!email || !password) {
      alert('Please fill in both email and password.');
      return;
    }

    if (isSignIn) {
      const { data, error } = await supabase.auth.signInWithPassword({ email, password });
      if (error) {
        alert('❌ ' + error.message);
      } else {
        authModal.style.display = 'none';
        signInText.textContent = data.user.email;
      }
    } else {
      const { data, error } = await supabase.auth.signUp({ email, password });
      if (error) {
        alert('❌ ' + error.message);
      } else {
        alert('✅ Registration email sent! Please check your inbox.');
        authModal.style.display = 'none';
      }
    }
  });

  oauthGoogleBtn.addEventListener('click', async () => {
    await supabase.auth.signInWithOAuth({ provider: 'google' });
  });

  if (closeAuthModal) {
    closeAuthModal.addEventListener('click', () => {
      authModal.style.display = 'none';
    });
  }

  window.addEventListener('click', (e) => {
    if (e.target === authModal) {
      authModal.style.display = 'none';
    }
  });

  supabase.auth.onAuthStateChange((event, session) => {
    if (session && session.user) {
      signInText.textContent = session.user.email;
    } else {
      signInText.textContent = 'Sign In';
    }
  });

</script>


  <!-- ===== JS Scripts ===== -->
  <script>
  // === Define all categories ===
  const categories = [
    { title: "Population 👥", emoji: "👥", mode: "population" },
    { title: "GDP 💵", emoji: "💵", mode: "gdp" },
    { title: "Happiness ☺️", emoji: "☺️", mode: "happiness" },
    { title: "Forest Cover 🌲", emoji: "🌲", mode: "forest" },
    { title: "Longest Coastline 🌊", emoji: "🌊", mode: "coastline" },
    { title: "Cuisine 🍽️", emoji: "🍽️", mode: "cuisine" },
    { title: "Olympic Medals 🥇", emoji: "🥇", mode: "olympic" },
    { title: "World Cup ⚽️", emoji: "⚽️", mode: "worldcup" },
    { title: "Land Mass 🌍", emoji: "🌍", mode: "landmass" },
    { title: "Altitude 🏔️", emoji: "🏔️", mode: "altitude" },
    { title: "Passport 🛂", emoji: "🛂", mode: "passport" },
  ];

  // === Daily Challenge ===
  const now = new Date();
  const startOfEpoch = new Date(Date.UTC(2025, 0, 1));
  const daysSinceEpoch = Math.floor((now - startOfEpoch) / (1000 * 60 * 60 * 24));
  const categoryIndex = daysSinceEpoch % categories.length;
  const todayCategory = categories[categoryIndex];

  const dailyCard = document.querySelector(".daily-challenge-card");
  if (dailyCard) {
    dailyCard.querySelector("h3").textContent = `Rank by ${todayCategory.title}`;
    const playButton = dailyCard.querySelector("a");
    playButton.href = `game.html?mode=${todayCategory.mode}`;

    // NEW: set a matching background image for the Daily Challenge card
    const bgMap = {
      population: "population.jpg",
      gdp: "gdp.jpg",
      happiness: "happiness.jpg",
      forest: "forest.jpg",
      coastline: "coastline.jpg",
      cuisine: "cuisine.jpg",
      olympic: "olympic.jpg",
      worldcup: "worldcup.jpg",
      landmass: "landmass.jpg",
      altitude: "altitude.jpg",
      passport: "passport.jpg",
    };

    const img = bgMap[todayCategory.mode];
    if (img) {
      dailyCard.style.backgroundImage = `url('images/categories/${img}')`;
      dailyCard.classList.add("has-photo");
    }
  }

  // === Smooth Fade-in on Scroll ===
  document.addEventListener("DOMContentLoaded", () => {
    const fadeEls = document.querySelectorAll('.fade-in');
    fadeEls.forEach((el, i) => el.style.setProperty('--i', i + 1));

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          setTimeout(() => entry.target.classList.add('visible'), 100);
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.05 });

    setTimeout(() => fadeEls.forEach(el => observer.observe(el)), 300);
  });


  </script>

  <script>
const toggleBtn = document.getElementById("menuToggle");
const overlay = document.getElementById("menuOverlay");
const closeBtn = document.getElementById("closeMenu");

if (toggleBtn && overlay) {
  toggleBtn.addEventListener("click", () => {
    overlay.classList.toggle("active");
  });
}

if (closeBtn && overlay) {
  closeBtn.addEventListener("click", () => {
    overlay.classList.remove("active");
  });
}

// optional: click outside panel closes it
overlay.addEventListener("click", (e) => {
  if (e.target === overlay) {
    overlay.classList.remove("active");
  }
});


  
</script>



</body>
</html>
